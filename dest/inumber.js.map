{"version":3,"sources":["INumber.js"],"names":["INumber","id","params","console","error","el","document","querySelector","input","locale","navigator","language","decreaseText","increaseText","className","inputPosition","min","getAttribute","max","step","value","formatValue","parseInt","Math","abs","parseFloat","decimals","formatNumber","ceil","setValue","controls","render","decreaseBtn","decrease","increaseBtn","increase","init","onclick","change","onblur","e","classList","add","btnDecrease","createElement","btnIncrease","setAttribute","innerHTML","insertBefore","firstChild","numberFormat","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","formatted","format","toFixed","currentTarget","replace"],"mappings":"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","sourcesContent":["/**\r\n * Author and copyright: Tishuk Nadezda (https://github.com/rainjeck)\r\n * Repository: https://github.com/rainjeck/inumber\r\n * License: MIT, see file 'LICENSE'\r\n */\r\n'use strict';\r\n\r\nexport default class INumber {\r\n\r\n  constructor(id, params) {\r\n\r\n    if (!id) {\r\n      console.error(\"INumber: Element not set\");\r\n      return;\r\n    }\r\n\r\n    let el;\r\n\r\n    if (typeof id === 'object') {\r\n      el = id;\r\n    }\r\n\r\n    if (typeof id === 'string') {\r\n      el = document.querySelector(id);\r\n    }\r\n\r\n    const input = el.querySelector(\"input\");\r\n\r\n    this.el = el;\r\n    this.input = input;\r\n\r\n    this.locale = params.locale || navigator.language || \"en-US\";\r\n\r\n    this.decreaseText = params.decreaseText || '-';\r\n    this.increaseText = params.increaseText || '+';\r\n\r\n    this.float = params.float || false;\r\n\r\n    this.className = 'inumber';\r\n\r\n    this.inputPosition = params.inputPosition || \"between\";\r\n\r\n    const min = input.getAttribute(\"min\");\r\n    const max = input.getAttribute(\"max\");\r\n    const step = input.getAttribute(\"step\");\r\n\r\n    this.value = input.value || 0;\r\n\r\n    this.formatValue = parseInt(input.value) || 0;\r\n\r\n    this.min = (min) ? Math.abs(min) : 0;\r\n    this.max = (max) ? Math.abs(max) : 0;\r\n    this.step = (step) ? Math.abs(step) : 1;\r\n\r\n    if (this.float) {\r\n\r\n      this.value = parseFloat(input.value) || 0;\r\n      this.step = parseFloat(this.step);\r\n      this.decimals = parseInt(params.decimals) || 1;\r\n      this.formatValue = this.formatNumber(this.value) || 0;\r\n\r\n    } else {\r\n\r\n      this.step = Math.ceil(this.step);\r\n      this.value = parseInt(this.value);\r\n      this.formatValue = this.formatNumber(this.value);\r\n\r\n    }\r\n\r\n    this.setValue(this.value);\r\n\r\n    const controls = this.render();\r\n\r\n    this.decreaseBtn = controls.decrease;\r\n    this.increaseBtn = controls.increase;\r\n\r\n    if (params && typeof params.init === \"function\") {\r\n      params.init(this);\r\n    }\r\n\r\n    controls.decrease.onclick = () => {\r\n      this.decrease();\r\n\r\n      if (params && typeof params.change === \"function\") {\r\n        params.change(this.value, this.formatValue, this.el, id);\r\n      }\r\n    }\r\n\r\n    controls.increase.onclick = () => {\r\n      this.increase();\r\n\r\n      if (params && typeof params.change === \"function\") {\r\n        params.change(this.value, this.formatValue, this.el, id);\r\n      }\r\n    }\r\n\r\n    input.onblur = (e) => {\r\n      this.change(e);\r\n\r\n      if (params && typeof params.change === \"function\") {\r\n        params.change(this.value, this.formatValue, this.el, id);\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    this.el.classList.add(this.className);\r\n    this.input.classList.add(`${this.className}-input`);\r\n\r\n    const btnDecrease = document.createElement(\"button\");\r\n    const btnIncrease = document.createElement(\"button\");\r\n\r\n    btnDecrease.setAttribute(\"type\", \"button\");\r\n    btnDecrease.setAttribute(\"class\", `${this.className}-button decrease`);\r\n\r\n    btnIncrease.setAttribute(\"type\", \"button\");\r\n    btnIncrease.setAttribute(\"class\", `${this.className}-button increase`);\r\n\r\n    btnDecrease.innerHTML = this.decreaseText;\r\n    btnIncrease.innerHTML = this.increaseText;\r\n\r\n    if (this.inputPosition == 'left') {\r\n      this.el.insertBefore(btnIncrease, null);\r\n      this.el.insertBefore(btnDecrease, null);\r\n    }\r\n\r\n    if (this.inputPosition == 'right') {\r\n      this.el.insertBefore(btnIncrease, this.el.firstChild);\r\n      this.el.insertBefore(btnDecrease, this.el.firstChild);\r\n    }\r\n\r\n    if (this.inputPosition == 'between') {\r\n      this.el.insertBefore(btnDecrease, this.el.firstChild);\r\n      this.el.insertBefore(btnIncrease, null);\r\n    }\r\n\r\n    return {\r\n      decrease: btnDecrease,\r\n      increase: btnIncrease\r\n    };\r\n  }\r\n\r\n  formatNumber(value) {\r\n    const decimals = this.decimals;\r\n\r\n    let numberFormat = new Intl.NumberFormat(this.locale, {\r\n      minimumFractionDigits: decimals,\r\n      maximumFractionDigits: decimals\r\n    });\r\n\r\n    const formatted = numberFormat.format(parseFloat(value));\r\n\r\n    return formatted;\r\n  }\r\n\r\n  setValue(value) {\r\n\r\n    if (typeof value === 'NaN') {\r\n      this.value = value = 0;\r\n    }\r\n\r\n    if (value == \"\") {\r\n      this.value = value = 0;\r\n    }\r\n\r\n    if (this.min >= 0 && value < this.min) {\r\n      value = this.min;\r\n    }\r\n\r\n    if (this.max != 0 && value > this.max) {\r\n      value = this.max;\r\n    }\r\n\r\n    if (this.float) {\r\n\r\n      this.value = +parseFloat(value).toFixed(this.decimals);\r\n      this.formatValue = this.formatNumber(value);\r\n\r\n    } else {\r\n\r\n      this.value = parseInt(value);\r\n      this.formatValue = this.formatNumber(this.value);\r\n\r\n    }\r\n\r\n    this.input.value = this.formatValue;\r\n  }\r\n\r\n  decrease() {\r\n    const value = this.value - this.step;\r\n    this.setValue(value);\r\n  }\r\n\r\n  increase() {\r\n    const value = this.value + this.step;\r\n    this.setValue(value);\r\n  }\r\n\r\n  change(e) {\r\n\r\n    let value = e.currentTarget.value;\r\n\r\n    value = value.replace(/[a-zA-Zа-яА-Я]/g, \"\");\r\n    value = value.replace(/[\\s*]/g, \"\");\r\n    value = value.replace(/[,*]/g, \".\");\r\n\r\n    this.setValue(value);\r\n  }\r\n}\r\n"],"file":"../src/inumber.js"}