/**
 * License: MIT
 * Description: Simple and easy Input Spinner
 * Author: Tishuk Nadezda
 * Homepage: https://rainjeck.github.io/inumber/
 */

{"version":3,"sources":["INumber.js"],"names":["INumber","id","opts","console","error","params","el","document","querySelector","input","locale","navigator","language","decreaseText","increaseText","className","inputPosition","value","formatValue","parseInt","min","hasAttribute","Math","abs","max","step","parseFloat","decimals","formatNumber","ceil","setValue","controls","render","decreaseBtn","decrease","increaseBtn","increase","init","onclick","change","onblur","e","classList","add","btnDecrease","createElement","btnIncrease","setAttribute","innerHTML","insertBefore","firstChild","numberFormat","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","formatted","format","toFixed","currentTarget","replace","minValue","maxValue"],"mappings":";;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;MAEqBA,O;AAEnB,qBAAYC,EAAZ,EAAgBC,IAAhB,EAAsB;AAAA;;AAAA;;AAEpB,UAAI,CAACD,EAAL,EAAS;AACPE,QAAAA,OAAO,CAACC,KAAR,CAAc,0BAAd;AACA;AACD;;AAED,UAAIC,MAAM,GAAGH,IAAI,IAAI,EAArB;AAEA,UAAII,EAAJ;;AAEA,UAAI,QAAOL,EAAP,MAAc,QAAlB,EAA4B;AAC1BK,QAAAA,EAAE,GAAGL,EAAL;AACD;;AAED,UAAI,OAAOA,EAAP,KAAc,QAAlB,EAA4B;AAC1BK,QAAAA,EAAE,GAAGC,QAAQ,CAACC,aAAT,CAAuBP,EAAvB,CAAL;AACD;;AAED,WAAKK,EAAL,GAAUA,EAAV;AACA,WAAKG,KAAL,GAAaH,EAAE,CAACE,aAAH,CAAiB,OAAjB,CAAb;AAEA,WAAKE,MAAL,GAAcL,MAAM,CAACK,MAAP,IAAiBC,SAAS,CAACC,QAA3B,IAAuC,OAArD;AAEA,WAAKC,YAAL,GAAoBR,MAAM,CAACQ,YAAP,IAAuB,GAA3C;AACA,WAAKC,YAAL,GAAoBT,MAAM,CAACS,YAAP,IAAuB,GAA3C;AAEA,sBAAaT,MAAM,SAAN,IAAgB,KAA7B;AAEA,WAAKU,SAAL,GAAiB,SAAjB;AAEA,WAAKC,aAAL,GAAqBX,MAAM,CAACW,aAAP,IAAwB,SAA7C;AAEA,WAAKC,KAAL,GAAa,KAAKR,KAAL,CAAWQ,KAAX,IAAoB,CAAjC;AAEA,WAAKC,WAAL,GAAmBC,QAAQ,CAAC,KAAKV,KAAL,CAAWQ,KAAZ,CAAR,IAA8B,CAAjD;AAEA,WAAKG,GAAL,GAAa,KAAKX,KAAL,CAAWY,YAAX,CAAwB,KAAxB,CAAF,GAAqCC,IAAI,CAACC,GAAL,CAAS,KAAKd,KAAL,CAAWW,GAApB,CAArC,GAAgE,CAA3E;AACA,WAAKI,GAAL,GAAa,KAAKf,KAAL,CAAWY,YAAX,CAAwB,KAAxB,CAAF,GAAqCC,IAAI,CAACC,GAAL,CAAS,KAAKd,KAAL,CAAWe,GAApB,CAArC,GAAgE,CAA3E;AACA,WAAKC,IAAL,GAAc,KAAKhB,KAAL,CAAWY,YAAX,CAAwB,MAAxB,CAAF,GAAsCC,IAAI,CAACC,GAAL,CAAS,KAAKd,KAAL,CAAWgB,IAApB,CAAtC,GAAkE,CAA9E;;AAEA,UAAI,aAAJ,EAAgB;AAEd,aAAKR,KAAL,GAAaS,UAAU,CAAC,KAAKjB,KAAL,CAAWQ,KAAZ,CAAV,IAAgC,CAA7C;AACA,aAAKQ,IAAL,GAAYC,UAAU,CAAC,KAAKD,IAAN,CAAtB;AACA,aAAKE,QAAL,GAAgBR,QAAQ,CAACd,MAAM,CAACsB,QAAR,CAAR,IAA6B,CAA7C;AACA,aAAKT,WAAL,GAAmB,KAAKU,YAAL,CAAkB,KAAKX,KAAvB,KAAiC,CAApD;AAED,OAPD,MAOO;AAEL,aAAKQ,IAAL,GAAYH,IAAI,CAACO,IAAL,CAAU,KAAKJ,IAAf,CAAZ;AACA,aAAKR,KAAL,GAAaE,QAAQ,CAAC,KAAKF,KAAN,CAArB;AACA,aAAKC,WAAL,GAAmB,KAAKU,YAAL,CAAkB,KAAKX,KAAvB,CAAnB;AAED;;AAED,WAAKa,QAAL,CAAc,KAAKb,KAAnB;AAEA,UAAMc,QAAQ,GAAG,KAAKC,MAAL,EAAjB;AAEA,WAAKC,WAAL,GAAmBF,QAAQ,CAACG,QAA5B;AACA,WAAKC,WAAL,GAAmBJ,QAAQ,CAACK,QAA5B;;AAEA,UAAI/B,MAAM,IAAI,OAAOA,MAAM,CAACgC,IAAd,KAAuB,UAArC,EAAiD;AAC/ChC,QAAAA,MAAM,CAACgC,IAAP,CAAY,IAAZ;AACD;;AAEDN,MAAAA,QAAQ,CAACG,QAAT,CAAkBI,OAAlB,GAA4B,YAAM;AAChC,QAAA,KAAI,CAACJ,QAAL;;AAEA,YAAI7B,MAAM,IAAI,OAAOA,MAAM,CAACkC,MAAd,KAAyB,UAAvC,EAAmD;AACjDlC,UAAAA,MAAM,CAACkC,MAAP,CAAc,KAAI,CAACtB,KAAnB,EAA0B,KAAI,CAACC,WAA/B,EAA4C,KAAI,CAACZ,EAAjD,EAAqDL,EAArD;AACD;AACF,OAND;;AAQA8B,MAAAA,QAAQ,CAACK,QAAT,CAAkBE,OAAlB,GAA4B,YAAM;AAChC,QAAA,KAAI,CAACF,QAAL;;AAEA,YAAI/B,MAAM,IAAI,OAAOA,MAAM,CAACkC,MAAd,KAAyB,UAAvC,EAAmD;AACjDlC,UAAAA,MAAM,CAACkC,MAAP,CAAc,KAAI,CAACtB,KAAnB,EAA0B,KAAI,CAACC,WAA/B,EAA4C,KAAI,CAACZ,EAAjD,EAAqDL,EAArD;AACD;AACF,OAND;;AAQA,WAAKQ,KAAL,CAAW+B,MAAX,GAAoB,UAACC,CAAD,EAAO;AACzB,QAAA,KAAI,CAACF,MAAL,CAAYE,CAAZ;;AAEA,YAAIpC,MAAM,IAAI,OAAOA,MAAM,CAACkC,MAAd,KAAyB,UAAvC,EAAmD;AACjDlC,UAAAA,MAAM,CAACkC,MAAP,CAAc,KAAI,CAACtB,KAAnB,EAA0B,KAAI,CAACC,WAA/B,EAA4C,KAAI,CAACZ,EAAjD,EAAqDL,EAArD;AACD;AACF,OAND;AAOD;;;;+BAEQ;AAEP,aAAKK,EAAL,CAAQoC,SAAR,CAAkBC,GAAlB,CAAsB,KAAK5B,SAA3B;AACA,aAAKN,KAAL,CAAWiC,SAAX,CAAqBC,GAArB,WAA4B,KAAK5B,SAAjC;AAEA,YAAM6B,WAAW,GAAGrC,QAAQ,CAACsC,aAAT,CAAuB,QAAvB,CAApB;AACA,YAAMC,WAAW,GAAGvC,QAAQ,CAACsC,aAAT,CAAuB,QAAvB,CAApB;AAEAD,QAAAA,WAAW,CAACG,YAAZ,CAAyB,MAAzB,EAAiC,QAAjC;AACAH,QAAAA,WAAW,CAACG,YAAZ,CAAyB,OAAzB,YAAqC,KAAKhC,SAA1C;AAEA+B,QAAAA,WAAW,CAACC,YAAZ,CAAyB,MAAzB,EAAiC,QAAjC;AACAD,QAAAA,WAAW,CAACC,YAAZ,CAAyB,OAAzB,YAAqC,KAAKhC,SAA1C;AAEA6B,QAAAA,WAAW,CAACI,SAAZ,GAAwB,KAAKnC,YAA7B;AACAiC,QAAAA,WAAW,CAACE,SAAZ,GAAwB,KAAKlC,YAA7B;;AAEA,YAAI,KAAKE,aAAL,IAAsB,MAA1B,EAAkC;AAChC,eAAKV,EAAL,CAAQ2C,YAAR,CAAqBH,WAArB,EAAkC,IAAlC;AACA,eAAKxC,EAAL,CAAQ2C,YAAR,CAAqBL,WAArB,EAAkC,IAAlC;AACD;;AAED,YAAI,KAAK5B,aAAL,IAAsB,OAA1B,EAAmC;AACjC,eAAKV,EAAL,CAAQ2C,YAAR,CAAqBH,WAArB,EAAkC,KAAKxC,EAAL,CAAQ4C,UAA1C;AACA,eAAK5C,EAAL,CAAQ2C,YAAR,CAAqBL,WAArB,EAAkC,KAAKtC,EAAL,CAAQ4C,UAA1C;AACD;;AAED,YAAI,KAAKlC,aAAL,IAAsB,SAA1B,EAAqC;AACnC,eAAKV,EAAL,CAAQ2C,YAAR,CAAqBL,WAArB,EAAkC,KAAKtC,EAAL,CAAQ4C,UAA1C;AACA,eAAK5C,EAAL,CAAQ2C,YAAR,CAAqBH,WAArB,EAAkC,IAAlC;AACD;;AAED,eAAO;AACLZ,UAAAA,QAAQ,EAAEU,WADL;AAELR,UAAAA,QAAQ,EAAEU;AAFL,SAAP;AAID;;;mCAEY7B,K,EAAO;AAClB,YAAMU,QAAQ,GAAG,KAAKA,QAAtB;AAEA,YAAIwB,YAAY,GAAG,IAAIC,IAAI,CAACC,YAAT,CAAsB,KAAK3C,MAA3B,EAAmC;AACpD4C,UAAAA,qBAAqB,EAAE3B,QAD6B;AAEpD4B,UAAAA,qBAAqB,EAAE5B;AAF6B,SAAnC,CAAnB;AAKA,YAAM6B,SAAS,GAAGL,YAAY,CAACM,MAAb,CAAoB/B,UAAU,CAACT,KAAD,CAA9B,CAAlB;AAEA,eAAOuC,SAAP;AACD;;;+BAEQvC,K,EAAO;AAEd,YAAI,OAAOA,KAAP,KAAiB,KAArB,EAA4B;AAC1B,eAAKA,KAAL,GAAaA,KAAK,GAAG,CAArB;AACD;;AAED,YAAIA,KAAK,IAAI,EAAb,EAAiB;AACf,eAAKA,KAAL,GAAaA,KAAK,GAAG,CAArB;AACD;;AAED,YAAI,KAAKG,GAAL,IAAY,CAAZ,IAAiBH,KAAK,GAAG,KAAKG,GAAlC,EAAuC;AACrCH,UAAAA,KAAK,GAAG,KAAKG,GAAb;AACD;;AAED,YAAI,KAAKI,GAAL,IAAY,CAAZ,IAAiBP,KAAK,GAAG,KAAKO,GAAlC,EAAuC;AACrCP,UAAAA,KAAK,GAAG,KAAKO,GAAb;AACD;;AAED,YAAI,aAAJ,EAAgB;AAEd,eAAKP,KAAL,GAAa,CAACS,UAAU,CAACT,KAAD,CAAV,CAAkByC,OAAlB,CAA0B,KAAK/B,QAA/B,CAAd;AACA,eAAKT,WAAL,GAAmB,KAAKU,YAAL,CAAkBX,KAAlB,CAAnB;AAED,SALD,MAKO;AAEL,eAAKA,KAAL,GAAaE,QAAQ,CAACF,KAAD,CAArB;AACA,eAAKC,WAAL,GAAmB,KAAKU,YAAL,CAAkB,KAAKX,KAAvB,CAAnB;AAED;;AAED,aAAKR,KAAL,CAAWQ,KAAX,GAAmB,KAAKC,WAAxB;AACD;;;iCAEU;AACT,YAAMD,KAAK,GAAG,KAAKA,KAAL,GAAa,KAAKQ,IAAhC;AACA,aAAKK,QAAL,CAAcb,KAAd;AACD;;;iCAEU;AACT,YAAMA,KAAK,GAAG,KAAKA,KAAL,GAAa,KAAKQ,IAAhC;AACA,aAAKK,QAAL,CAAcb,KAAd;AACD;;;6BAEMwB,C,EAAG;AAER,YAAIxB,KAAK,GAAGwB,CAAC,CAACkB,aAAF,CAAgB1C,KAA5B;AAEAA,QAAAA,KAAK,GAAGA,KAAK,CAAC2C,OAAN,CAAc,iBAAd,EAAiC,EAAjC,CAAR;AACA3C,QAAAA,KAAK,GAAGA,KAAK,CAAC2C,OAAN,CAAc,QAAd,EAAwB,EAAxB,CAAR;AACA3C,QAAAA,KAAK,GAAGA,KAAK,CAAC2C,OAAN,CAAc,OAAd,EAAuB,GAAvB,CAAR;AAEA,aAAK9B,QAAL,CAAcb,KAAd;AACD;;;6BAEO4C,Q,EAAW;AACjB,aAAKzC,GAAL,GAAWE,IAAI,CAACC,GAAL,CAAUsC,QAAV,CAAX;;AAEA,YAAK,KAAK5C,KAAL,GAAa,KAAKG,GAAvB,EAA6B;AAC3B,eAAKU,QAAL,CAAe,KAAKV,GAApB;AACD;AACF;;;6BAEO0C,Q,EAAW;AACjB,aAAKtC,GAAL,GAAWF,IAAI,CAACC,GAAL,CAAUuC,QAAV,CAAX;;AAEA,YAAK,KAAK7C,KAAL,GAAa,KAAKO,GAAvB,EAA6B;AAC3B,eAAKM,QAAL,CAAe,KAAKN,GAApB;AACD;AACF;;;8BAEQC,I,EAAO;AACd,aAAKA,IAAL,GAAYH,IAAI,CAACC,GAAL,CAAUE,IAAV,CAAZ;;AAEA,YAAI,aAAJ,EAAgB;AACd,eAAKA,IAAL,GAAYC,UAAU,CAAC,KAAKD,IAAN,CAAtB;AACD,SAFD,MAEO;AACL,eAAKA,IAAL,GAAYH,IAAI,CAACO,IAAL,CAAU,KAAKJ,IAAf,CAAZ;AACD;AACF","sourcesContent":["'use strict';\r\n\r\nexport default class INumber {\r\n\r\n  constructor(id, opts) {\r\n\r\n    if (!id) {\r\n      console.error(\"INumber: Element not set\");\r\n      return;\r\n    }\r\n\r\n    let params = opts || {};\r\n\r\n    let el;\r\n\r\n    if (typeof id === 'object') {\r\n      el = id;\r\n    }\r\n\r\n    if (typeof id === 'string') {\r\n      el = document.querySelector(id);\r\n    }\r\n\r\n    this.el = el;\r\n    this.input = el.querySelector(\"input\");\r\n\r\n    this.locale = params.locale || navigator.language || \"en-US\";\r\n\r\n    this.decreaseText = params.decreaseText || '-';\r\n    this.increaseText = params.increaseText || '+';\r\n\r\n    this.float = params.float || false;\r\n\r\n    this.className = 'inumber';\r\n\r\n    this.inputPosition = params.inputPosition || \"between\";\r\n\r\n    this.value = this.input.value || 0;\r\n\r\n    this.formatValue = parseInt(this.input.value) || 0;\r\n\r\n    this.min = ( this.input.hasAttribute(\"min\") ) ? Math.abs(this.input.min) : 0;\r\n    this.max = ( this.input.hasAttribute(\"max\") ) ? Math.abs(this.input.max) : 0;\r\n    this.step = ( this.input.hasAttribute(\"step\") ) ? Math.abs(this.input.step) : 1;\r\n\r\n    if (this.float) {\r\n\r\n      this.value = parseFloat(this.input.value) || 0;\r\n      this.step = parseFloat(this.step);\r\n      this.decimals = parseInt(params.decimals) || 1;\r\n      this.formatValue = this.formatNumber(this.value) || 0;\r\n\r\n    } else {\r\n\r\n      this.step = Math.ceil(this.step);\r\n      this.value = parseInt(this.value);\r\n      this.formatValue = this.formatNumber(this.value);\r\n\r\n    }\r\n\r\n    this.setValue(this.value);\r\n\r\n    const controls = this.render();\r\n\r\n    this.decreaseBtn = controls.decrease;\r\n    this.increaseBtn = controls.increase;\r\n\r\n    if (params && typeof params.init === \"function\") {\r\n      params.init(this);\r\n    }\r\n\r\n    controls.decrease.onclick = () => {\r\n      this.decrease();\r\n\r\n      if (params && typeof params.change === \"function\") {\r\n        params.change(this.value, this.formatValue, this.el, id);\r\n      }\r\n    }\r\n\r\n    controls.increase.onclick = () => {\r\n      this.increase();\r\n\r\n      if (params && typeof params.change === \"function\") {\r\n        params.change(this.value, this.formatValue, this.el, id);\r\n      }\r\n    }\r\n\r\n    this.input.onblur = (e) => {\r\n      this.change(e);\r\n\r\n      if (params && typeof params.change === \"function\") {\r\n        params.change(this.value, this.formatValue, this.el, id);\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    this.el.classList.add(this.className);\r\n    this.input.classList.add(`${this.className}-input`);\r\n\r\n    const btnDecrease = document.createElement(\"button\");\r\n    const btnIncrease = document.createElement(\"button\");\r\n\r\n    btnDecrease.setAttribute(\"type\", \"button\");\r\n    btnDecrease.setAttribute(\"class\", `${this.className}-button is-decrease`);\r\n\r\n    btnIncrease.setAttribute(\"type\", \"button\");\r\n    btnIncrease.setAttribute(\"class\", `${this.className}-button is-increase`);\r\n\r\n    btnDecrease.innerHTML = this.decreaseText;\r\n    btnIncrease.innerHTML = this.increaseText;\r\n\r\n    if (this.inputPosition == 'left') {\r\n      this.el.insertBefore(btnIncrease, null);\r\n      this.el.insertBefore(btnDecrease, null);\r\n    }\r\n\r\n    if (this.inputPosition == 'right') {\r\n      this.el.insertBefore(btnIncrease, this.el.firstChild);\r\n      this.el.insertBefore(btnDecrease, this.el.firstChild);\r\n    }\r\n\r\n    if (this.inputPosition == 'between') {\r\n      this.el.insertBefore(btnDecrease, this.el.firstChild);\r\n      this.el.insertBefore(btnIncrease, null);\r\n    }\r\n\r\n    return {\r\n      decrease: btnDecrease,\r\n      increase: btnIncrease\r\n    };\r\n  }\r\n\r\n  formatNumber(value) {\r\n    const decimals = this.decimals;\r\n\r\n    let numberFormat = new Intl.NumberFormat(this.locale, {\r\n      minimumFractionDigits: decimals,\r\n      maximumFractionDigits: decimals\r\n    });\r\n\r\n    const formatted = numberFormat.format(parseFloat(value));\r\n\r\n    return formatted;\r\n  }\r\n\r\n  setValue(value) {\r\n\r\n    if (typeof value === 'NaN') {\r\n      this.value = value = 0;\r\n    }\r\n\r\n    if (value == \"\") {\r\n      this.value = value = 0;\r\n    }\r\n\r\n    if (this.min >= 0 && value < this.min) {\r\n      value = this.min;\r\n    }\r\n\r\n    if (this.max != 0 && value > this.max) {\r\n      value = this.max;\r\n    }\r\n\r\n    if (this.float) {\r\n\r\n      this.value = +parseFloat(value).toFixed(this.decimals);\r\n      this.formatValue = this.formatNumber(value);\r\n\r\n    } else {\r\n\r\n      this.value = parseInt(value);\r\n      this.formatValue = this.formatNumber(this.value);\r\n\r\n    }\r\n\r\n    this.input.value = this.formatValue;\r\n  }\r\n\r\n  decrease() {\r\n    const value = this.value - this.step;\r\n    this.setValue(value);\r\n  }\r\n\r\n  increase() {\r\n    const value = this.value + this.step;\r\n    this.setValue(value);\r\n  }\r\n\r\n  change(e) {\r\n\r\n    let value = e.currentTarget.value;\r\n\r\n    value = value.replace(/[a-zA-Zа-яА-Я]/g, \"\");\r\n    value = value.replace(/[\\s*]/g, \"\");\r\n    value = value.replace(/[,*]/g, \".\");\r\n\r\n    this.setValue(value);\r\n  }\r\n\r\n  setMin( minValue ) {\r\n    this.min = Math.abs( minValue );\r\n\r\n    if ( this.value < this.min ) {\r\n      this.setValue( this.min );\r\n    }\r\n  }\r\n\r\n  setMax( maxValue ) {\r\n    this.max = Math.abs( maxValue );\r\n\r\n    if ( this.value > this.max ) {\r\n      this.setValue( this.max );\r\n    }\r\n  }\r\n\r\n  setStep( step ) {\r\n    this.step = Math.abs( step );\r\n\r\n    if (this.float) {\r\n      this.step = parseFloat(this.step);\r\n    } else {\r\n      this.step = Math.ceil(this.step);\r\n    }\r\n  }\r\n}\r\n"],"file":"../src/inumber.js"}